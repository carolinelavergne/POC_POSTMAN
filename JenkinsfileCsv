pipeline {
    agent any
    
    tools {nodejs "nodejs"}
    
    stages {
      stage("Npm package installation") {
        steps {
          sh 'npm install'
        }
      }
      stage("Newman package installation") {
        steps {
          sh 'npm install -g newman'
        }
      }
      stage("Run newman") {
        steps {
           script {
             try {
               sh 'newman run Newman.json -e Prod.json -d iterationData.csv --reporters junit --reporter-junit-export newman.xml'
               currentBuild.result = 'SUCCESS'
             } finally {
               
             }
          } 
        } 
      }
    }
}
        
        
